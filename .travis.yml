language: java
jdk:
  - oraclejdk8
  
sudo: false
  
install: 
  - mvn install -P !build-extras -DskipTests=true -Dmaven.javadoc.skip=true -B -V
  
script:
  - mvn test -P !build-extras -B

cache:
  directories:
    - ~/.m2/repository
    
deploy:
  skip_cleanup: true
  provider: script
  script:
    - /bin/sh ./deploy.sh
  on:
    tags: true
